{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","views/users/User.js","views/users/Users.js"],"names":["_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","User","props","lg","className","utilisateur","id","nom","prenom","email","telephone","institution","createdDate","lastModifiedDate","Utilisateurs","useState","show","showError","details","setDetails","errorMessage","loadingState","setLoadingState","data","setData","useEffect","fetch","process","then","response","json","catch","error","console","log","to","variant","color","loading","size","items","fields","key","label","_style","width","sorter","filter","columnFilter","tableFilter","footer","itemsPerPageSelect","itemsPerPage","hover","pagination","scopedSlots","item","index","shape","onClick","position","indexOf","newDetails","slice","splice","toggleDetails","includes","sigle","sm","autohide","fade","closeButton"],"mappings":"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","file":"static/js/19.aa3c4421.chunk.js","sourcesContent":["import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React from 'react'\r\nimport { CCard, CCardBody, CCardHeader, CCol, CRow } from '@coreui/react'\r\nimport CIcon from '@coreui/icons-react'\r\n\r\nconst User = (props) => {\r\n  return (\r\n    <CRow>\r\n      <CCol lg={6}>\r\n        <CCard>\r\n          <CCardHeader  className=\"text-muted\">\r\n           Identifiant de l'utilisateur : {props.utilisateur.id}\r\n          </CCardHeader>\r\n          <CCardBody>\r\n            <ul>\r\n              <li> Nom : {props.utilisateur.nom}</li>\r\n              <li> Prénom : {props.utilisateur.prenom}</li>\r\n              <li> Email : {props.utilisateur.email}</li>\r\n              <li> Téléphone : {props.utilisateur.telephone}</li>\r\n              <li> Institution : {props.utilisateur.institution.nom}</li>\r\n              <li> Créé le : {props.utilisateur.createdDate}</li>\r\n              <li> Dernière modification : {props.utilisateur.lastModifiedDate}</li>\r\n            </ul>\r\n          </CCardBody>\r\n        </CCard>\r\n      </CCol>\r\n    </CRow>\r\n  )\r\n}\r\n\r\nexport default User\r\n","import React, { useState, useEffect } from 'react'\r\nimport {\r\n  CCardBody,\r\n  CDataTable,\r\n  CButton,\r\n  CCollapse,\r\n  CLink,\r\n  CCol,\r\n  CBadge,\r\n  CToast,\r\n  CToastBody,\r\n  CToastHeader,\r\n  CToaster\r\n} from '@coreui/react'\r\nimport User from \"./User\";\r\nimport UserService from \"../../../src/services/UserService\";\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\n\r\n  const Utilisateurs = () => {\r\n          //__toaster\r\n  const [show, setShow] = useState(false);\r\n  const [showError, setShowError] = useState(false);\r\n  //__end toaster\r\n  const [details, setDetails] = useState([])\r\n\r\n  const toggleDetails = (index,id) => {\r\n    const position = details.indexOf(index)\r\n    let newDetails = details.slice()\r\n    if (position !== -1) {\r\n      newDetails.splice(position, 1)\r\n    } else {\r\n      newDetails = [...details, index]\r\n    }\r\n\r\n    setDetails(newDetails)\r\n  }\r\n\r\n  const fields = [\r\n    { key: 'id', label:'ID', _style: { width: '2%'} },\r\n    { key: 'nom', label:'Nom', _style: { width: '20%'} },\r\n    { key: 'prenom', label:'Prénom', _style: { width: '20%'} },\r\n    { key: 'username', label:'Nom d\\'utilisateur', _style: { width: '20%'} },\r\n    { key: 'email', label:'Email', _style: { width: '20%'} },\r\n    { key: 'institution', label:'Institution', _style: { width: '20%'} },\r\n    { key: 'createdDate', label:'Date de création', _style: { width: '10%'} },\r\n    {\r\n      key: 'show_details',\r\n      label: 'Actions',\r\n      _style: { width: '1%' },\r\n      sorter: false,\r\n      filter: false\r\n    }\r\n  ]\r\n\r\n  const [errorMessage, setErrorMessage] = useState('Echec du processus. Veuillez essayer ultérieurement !');\r\n  const [loadingState, setLoadingState] = useState(false);\r\n\r\n  const onDelete = (id) => {\r\n    if (window.confirm(\"Confirmer la suppression\")) {\r\n      const requestOptions = {\r\n        method: 'DELETE',\r\n        headers: { 'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${UserService.getToken()}`,\r\n        \"Access-Control-Allow-Credentials\" : true  },\r\n      };\r\n      fetch(`${process.env.REACT_APP_API_URL}/api/utilisateurs/`+id, requestOptions)\r\n        .then(response => console.log(response))\r\n        .then(() => setShow(true))\r\n        .then(() => setLoadingState(false))\r\n        .catch((error) => {\r\n          console.log(error);\r\n          setShowError(true)\r\n          setLoadingState(false);\r\n        })\r\n      const newList = data.filter((item) => item.id !== id);\r\n      setData(newList);\r\n    }     \r\n    \r\n    setTimeout(() => {\r\n      setShow(false)\r\n      setShowError(false);\r\n    }, 3000)\r\n  }\r\n\r\n\r\n\r\n  const [data, setData] = useState([])\r\n  useEffect(() => {\r\n    setLoadingState(true);\r\n\r\n    fetch(`${process.env.REACT_APP_API_URL}/api/utilisateurs/`)\r\n      .then((response) => response.json())\r\n      .then((json) => setData(json))\r\n      .then(() => setLoadingState(false))\r\n      .catch((error) => {\r\n        console.log(error);\r\n        setLoadingState(false);\r\n      }); \r\n    \r\n  }, []);\r\n\r\n\r\n  return (\r\n    <div>\r\n          <CLink to=\"/utilisateurs/create\" >   \r\n            <CButton variant=\"outline\" color=\"success\">Ajouter</CButton>\r\n            <ClipLoader loading={loadingState} size={25} />\r\n          </CLink>\r\n            \r\n          <CDataTable\r\n      items={data ? data : null}\r\n      fields={fields}\r\n      columnFilter\r\n      tableFilter\r\n      footer\r\n      itemsPerPageSelect\r\n      itemsPerPage={5}\r\n      hover\r\n      sorter\r\n      pagination\r\n      scopedSlots = {{\r\n        'show_details':\r\n          (item, index)=>{\r\n            return (\r\n              <td className=\"py-2\">\r\n                <CButton\r\n                  color=\"primary\"\r\n                  variant=\"outline\"\r\n                  shape=\"square\"\r\n                  size=\"sm\"\r\n                  onClick={()=>{toggleDetails(index,item.id)}}\r\n                >\r\n                  {details.includes(index) ? 'Cacher' : 'Voir'}\r\n                </CButton>                          \r\n              </td>\r\n              )\r\n          },\r\n          'institution':\r\n          (item)=>{\r\n            return (\r\n              item.institution ? <td>{item.institution.nom} ({item.institution.sigle})</td>\r\n              : ''\r\n              \r\n              )\r\n          },\r\n        'details':\r\n            (item, index)=>{\r\n              return (\r\n              <CCollapse show={details.includes(index)}>\r\n                <User utilisateur = {item} />\r\n                <CCardBody>\r\n                  <CLink to={`/utilisateurs/edit/${item.id}`}> \r\n                    <CButton size=\"sm\" color=\"info\">\r\n                      Modifier\r\n                    </CButton>\r\n                  </CLink>\r\n                  {/* <CButton size=\"sm\" color=\"danger\" className=\"ml-1\" onClick= {() =>{onDelete(item.id)}}>\r\n                    Supprimer <ClipLoader loading={loadingState} size={15} />\r\n                  </CButton> */}\r\n                </CCardBody>\r\n              </CCollapse>\r\n            )\r\n          }\r\n      }}\r\n    />\r\n\r\n       {/* SHOW SUCCES */}\r\n       <CCol sm=\"12\" lg=\"6\">\r\n    <CToaster\r\n      position={'top-right'}\r\n      > \r\n          <CToast\r\n            show={show}\r\n            autohide={true && 4000}\r\n            fade={true}\r\n          >\r\n            <CToastHeader closeButton={true}>\r\n            <CBadge className=\"mr-1\" color=\"success\">SUCCÈS</CBadge>              \r\n            </CToastHeader>\r\n            <CToastBody  color=\"success\">\r\n              Opération réussie !\r\n            </CToastBody>\r\n          </CToast>\r\n      </CToaster>\r\n    </CCol>\r\n\r\n    {/* SHOW ERROR */}\r\n    <CCol sm=\"12\" lg=\"6\">\r\n          <CToaster\r\n            position={'top-right'}\r\n          > \r\n                <CToast\r\n                  show={showError}\r\n                  autohide={true && 4000}\r\n                  fade={true}\r\n                >\r\n                  <CToastHeader closeButton={true}>\r\n                  <CBadge className=\"mr-1\" color=\"danger\">ECHEC</CBadge>              \r\n                  </CToastHeader>\r\n                  <CToastBody  color=\"success\">\r\n                    {errorMessage}\r\n                  </CToastBody>\r\n                </CToast>\r\n          </CToaster>\r\n        </CCol>\r\n    </div>\r\n    \r\n  )\r\n    }\r\n  export default Utilisateurs"],"sourceRoot":""}