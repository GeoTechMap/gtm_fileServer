{"version":3,"sources":["views/essais/single-page.js","views/essais/all-pages.js","views/essais/PDF.js"],"names":["SinglePage","props","useState","numPages","setNumPages","pageNumber","setPageNumber","changePage","offset","prevPageNumber","pdf","file","options","workerSrc","loading","size","onLoadSuccess","type","disabled","onClick","pdfjs","GlobalWorkerOptions","version","LoadFromBase64Example","match","pdfTrouve","setPdfTrouve","data","setData","useEffect","setLoadingState","fetch","process","params","id","then","response","json","method","headers","body","JSON","stringify","nomFichier","nom","hashNomFichier","hashBase64","hashPdf","res","catch","error","console","log","loadingState","className","base64File"],"mappings":"wXAIe,SAASA,EAAWC,GAAQ,IAAD,EACRC,mBAAS,MADD,mBACjCC,EADiC,KACvBC,EADuB,OAEJF,mBAAS,GAFL,mBAEjCG,EAFiC,KAErBC,EAFqB,KASxC,SAASC,EAAWC,GAClBF,GAAc,SAAAG,GAAc,OAAIA,EAAiBD,KAVX,IAqBhCE,EAAQT,EAARS,IAER,OACE,qCACE,cAAC,IAAD,CACEC,KAAMD,EACNE,QAAS,CAAEC,UAAW,kBACtBC,QAAU,cAAC,IAAD,CAAYA,SAAS,EAAMC,KAAM,KAC3CC,cAzBN,YAA8C,IAAbb,EAAY,EAAZA,SAC/BC,EAAYD,GACZG,EAAc,IAmBZ,SAME,cAAC,IAAD,CAAMD,WAAYA,MAEpB,gCACE,sCACQA,IAAeF,EAAW,EAAI,MADtC,OACiDA,GAAY,QAE7D,wBAAQc,KAAK,SAASC,SAAUb,GAAc,EAAGc,QAxBvD,WACEZ,GAAY,IAuBR,6BAGA,wBACEU,KAAK,SACLC,SAAUb,GAAcF,EACxBgB,QA1BR,WACEZ,EAAW,IAsBP,2BCzCRa,IAAMC,oBAAoBR,UAA1B,kDAAiFO,IAAME,QAAvF,kB,OC4DeC,UAxDe,SAAC,GAAa,IAAZC,EAAW,EAAXA,MAAW,EAELtB,oBAAS,GAFJ,mBAEhCuB,EAFgC,KAErBC,EAFqB,OAGfxB,mBAAS,IAHM,mBAGhCyB,EAHgC,KAG1BC,EAH0B,KAIvCC,qBAAU,WACNC,GAAgB,GAEhBC,MAAM,GAAD,OAAIC,mCAAJ,6BAAsDR,EAAMS,OAAOC,KACvEC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAR,GAiBP,OAhBKI,MAAM,GAAD,OAAIC,iCAAJ,qBAA8D,CAC/DM,OAAQ,OACRC,QAAS,CAAE,eAAgB,mBAC3B,OAAU,oBACVC,KAAMC,KAAKC,UAAU,CACjBC,WAAYhB,EAAKiB,IACjBC,eAAgBlB,EAAKkB,eACrBC,WAAWnB,EAAKoB,YAEnBZ,MAAK,SAAAa,GAAG,OAAIA,EAAIX,UAChBF,MAAK,SAAAa,GAAG,OAAIpB,EAAQoB,MACpBC,OAAM,SAACC,GACJC,QAAQD,MAAM,SAAUA,GACxBpB,GAAgB,GAChBJ,GAAa,MAEnBC,KAERQ,MAAK,kBAAML,GAAgB,MAC3BmB,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZpB,GAAgB,QAKhB,IApCoC,MAsCC5B,oBAAS,GAtCV,mBAsChCmD,EAtCgC,KAsClBvB,EAtCkB,KAyCvC,OAMI,cALA,CAKA,OAAKwB,UAAU,MAAf,UACA,cAAC,IAAD,CAAYxC,QAASuC,EAActC,KAAM,KACzC,cAACf,EAAD,CAAqBU,IAAG,sCAAiCiB,EAAK4B,eAC/C,IAAd9B,EAAsB,wEAAgD","file":"static/js/5.bcf1d4b7.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Document, Page } from \"react-pdf\";\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\n\r\nexport default function SinglePage(props) {\r\n  const [numPages, setNumPages] = useState(null);\r\n  const [pageNumber, setPageNumber] = useState(1); //setting 1 to show fisrt page\r\n\r\n  function onDocumentLoadSuccess({ numPages }) {\r\n    setNumPages(numPages);\r\n    setPageNumber(1);\r\n  }\r\n\r\n  function changePage(offset) {\r\n    setPageNumber(prevPageNumber => prevPageNumber + offset);\r\n  }\r\n\r\n  function previousPage() {\r\n    changePage(-1);\r\n  }\r\n\r\n  function nextPage() {\r\n    changePage(1);\r\n  }\r\n\r\n  const { pdf } = props;\r\n\r\n  return (\r\n    <>\r\n      <Document\r\n        file={pdf}\r\n        options={{ workerSrc: \"/pdf.worker.js\" }}\r\n        loading= {<ClipLoader loading={true} size={35} />}\r\n        onLoadSuccess={onDocumentLoadSuccess}\r\n      >\r\n        <Page pageNumber={pageNumber} />\r\n      </Document>\r\n      <div>\r\n        <p>\r\n          Page {pageNumber || (numPages ? 1 : \"--\")} of {numPages || \"--\"}\r\n        </p>\r\n        <button type=\"button\" disabled={pageNumber <= 1} onClick={previousPage}>\r\n        Précédent\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          disabled={pageNumber >= numPages}\r\n          onClick={nextPage}\r\n        >\r\n          Suivant\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Document, Page } from \"react-pdf\";\r\nimport { pdfjs } from 'react-pdf';\r\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\r\n\r\nexport default function AllPages(props) {\r\n  const [numPages, setNumPages] = useState(null);\r\n\r\n  function onDocumentLoadSuccess({ numPages }) {\r\n    setNumPages(numPages);\r\n  }\r\n  \r\n  const { pdf } = props;\r\n\r\n  return (\r\n    <Document\r\n      file={pdf}\r\n      options={{ workerSrc: \"/pdf.worker.js\" }}\r\n      onLoadSuccess={onDocumentLoadSuccess}\r\n      nLoadError={console.error}\r\n    >\r\n      {Array.from(new Array(numPages), (el, index) => (\r\n        <Page key={`page_${index + 1}`} pageNumber={index + 1} />\r\n      ))}\r\n    </Document>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from 'react';\r\n\r\nimport SinglePagePDFViewer from \"./single-page\";\r\nimport AllPagesPDFViewer from \"./all-pages\";\r\nimport \"./styles.css\";\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\n\r\nconst LoadFromBase64Example = ({match}) => {\r\n\r\n    const [pdfTrouve, setPdfTrouve] = useState(true);\r\n    const [data, setData] = useState({})\r\n    useEffect(() => {\r\n        setLoadingState(true);\r\n\r\n        fetch(`${process.env.REACT_APP_API_URL}/api/file/info?id=${match.params.id}`)\r\n        .then(response => response.json())\r\n        .then(data =>   {\r\n            fetch(`${process.env.REACT_APP_FILE_SERVER_URL}/api/file/getfile`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json',\r\n                'Accept': 'application/json'},\r\n                body: JSON.stringify({\r\n                    nomFichier: data.nom,\r\n                    hashNomFichier: data.hashNomFichier,\r\n                    hashBase64:data.hashPdf\r\n                })})\r\n                .then(res => res.json())\r\n                .then(res => setData(res))\r\n                .catch((error) => {\r\n                    console.error('Error:', error);\r\n                    setLoadingState(false);\r\n                    setPdfTrouve(false);\r\n                  });\r\n       return data;\r\n     })\r\n     .then(() => setLoadingState(false))\r\n     .catch((error) => {\r\n       console.log(error);\r\n       setLoadingState(false);\r\n     }); \r\n      \r\n        \r\n      \r\n    }, []);\r\n\r\n    const [loadingState, setLoadingState] = useState(false);\r\n\r\n \r\n    return (\r\n        // <div  >{console.log(globalData)}\r\n        //     <embed src={`data:application/pdf;base64,${data.base64File}`}  \r\n        //     type=\"application/pdf\" width=\"100%\" height=\"100%\"></embed>\r\n       \r\n        // </div>\r\n        <div className=\"App\">\r\n        <ClipLoader loading={loadingState} size={50} />\r\n        <SinglePagePDFViewer pdf={`data:application/pdf;base64,${data.base64File}`}  />\r\n        {pdfTrouve === false ? <h6>Document non disponible pour le moment</h6>:''}\r\n     </div>\r\n  \r\n    );\r\n};\r\n\r\nexport default LoadFromBase64Example;"],"sourceRoot":""}