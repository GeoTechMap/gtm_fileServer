{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","views/essais/Essai.js","views/essais/Essais.js"],"names":["_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","Essai","props","useContext","EssaiContext","globalData","setGlonbalData","lg","className","essai","codeEssai","idTypeEssai","nomTypeEssai","nomInstitution","sigleInstitution","emailInstitution","telephone1Institution","adresseInstitution","descriptionInstitution","latitudePosition","longitudePosition","altitudePosition","departementPosition","dateRealisationEssai","createdDateEssai","lastModifiedDateEssai","lastModifiedByEssai","onClick","selectedEssai","to","idFichier","Essais","useState","details","setDetails","show","setShow","showError","setShowError","errorMessage","setLoadingState","data","setData","useEffect","setLoadingStateHead","fetch","process","then","response","json","essaiDetailsDto","catch","error","console","log","setTotalEssais","UserService","getUsername","res","setConnectedUser","connectedUser","fetch_with_pagination","pageSize","pageNumber","loadingStateHead","setPageSize","currentPage","setActivePage","totalEssais","undefined","institution","variant","color","loading","size","style","float","name","onChange","e","parseInt","target","value","outlined","items","fields","key","label","_style","width","sorter","filter","responsive","tableFilter","itemsPerPage","hover","onTableFilterChange","keyWord","scopedSlots","item","index","shape","id","position","indexOf","newDetails","slice","splice","toggleDetails","includes","idInstitution","idEssai","window","confirm","requestOptions","method","headers","getToken","newList","setTimeout","onDelete","activePage","pages","Math","floor","onActivePageChange","sm","autohide","fade","closeButton"],"mappings":"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","file":"static/js/15.3c79b97b.chunk.js","sourcesContent":["import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { useContext } from \"react\";\r\nimport { CCard, CCardBody, CCardHeader, CCol, CRow } from '@coreui/react'\r\nimport { Link } from 'react-router-dom';\r\nimport { EssaiContext } from \"../../EssaisContext\";\r\n\r\nconst Essai = (props) => {\r\n  const [globalData, setGlonbalData] = useContext(EssaiContext);\r\n  const handleOnClick = (essai) => {\r\n    setGlonbalData({...globalData, \r\n      selectedEssai: essai})\r\n  }\r\n  return (\r\n    <CRow>\r\n      <CCol lg={6}>\r\n        <CCard>\r\n          <CCardHeader  className=\"text-muted\">\r\n           Identifiant de l'essai : {props.essai.codeEssai}\r\n          </CCardHeader>\r\n          <CCardBody>\r\n            <ul>\r\n              <li>Type d'essai : \r\n              {props.essai.idTypeEssai ?   props.essai.nomTypeEssai\r\n                : ''}\r\n              </li>\r\n              <li>\r\n                <details>\r\n                  <summary>Institution : {props.essai.nomInstitution} ({props.essai.sigleInstitution})</summary>\r\n                  <ul>\r\n                    <li>Email : {props.essai.emailInstitution}</li>\r\n                    <li>Téléphone : {props.essai.telephone1Institution}</li>\r\n                    <li>Adresse : {props.essai.adresseInstitution}</li>\r\n                    <li>À propos : {props.essai.descriptionInstitution}</li>\r\n                  </ul>\r\n                </details>\r\n              </li>\r\n              {/* <li>Coordonnées : ({props.essai.position.latitude}, {props.essai.position.longitude}, {props.essai.position.altitude})</li>\r\n              <li>Adresse : {props.essai.position.adresse}</li> */}\r\n              <li>Latitute : {props.essai.latitudePosition}</li>\r\n              <li>Longitude : {props.essai.longitudePosition}</li>\r\n              <li>Altitude : {props.essai.altitudePosition}</li>\r\n              <li>Département : {props.essai.departementPosition}</li>\r\n              <li>Date de réalisation: {props.essai.dateRealisationEssai}</li>\r\n              <li>Créé le : {props.essai.createdDateEssai}</li>\r\n              <li>Dernière modification : {props.essai.lastModifiedDateEssai}</li>\r\n              <li>Modifié par: {props.essai.lastModifiedByEssai}</li>\r\n              <li onClick={() => handleOnClick(props.essai)}><Link \r\n                to={`/pdf/${props.essai.idFichier}`} \r\n                >Voir résultat\r\n                </Link></li>\r\n            </ul>\r\n          </CCardBody>\r\n        </CCard>\r\n      </CCol>\r\n    </CRow>\r\n  )\r\n}\r\n\r\nexport default Essai\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport {\r\n  CCardBody,\r\n  CDataTable,\r\n  CPagination,\r\n  CButton,\r\n  CCollapse,\r\n  CCol,\r\n  CBadge,\r\n  CToast,\r\n  CToastBody,\r\n  CToastHeader,\r\n  CToaster,\r\n  CSelect,\r\n  CRow,\r\n  CLink\r\n\r\n} from '@coreui/react'\r\nimport Test from \"./Essai\";\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\nimport { EssaiContext } from \"../../EssaisContext\";\r\nimport UserService from \"../../../src/services/UserService\";\r\n\r\n\r\n  const Essais = () => {\r\n    const [globalData, setGlobalData] = useContext(EssaiContext);\r\n  const [details, setDetails] = useState([])\r\n\r\n      //__toaster\r\n      const [show, setShow] = useState(false);\r\n      const [showError, setShowError] = useState(false);\r\n      //__end toaster\r\n\r\n  const toggleDetails = (index,id) => {\r\n    const position = details.indexOf(index)\r\n    let newDetails = details.slice()\r\n    if (position !== -1) {\r\n      newDetails.splice(position, 1)\r\n    } else {\r\n      newDetails = [...details, index]\r\n    }\r\n\r\n    setDetails(newDetails)\r\n  }\r\n\r\n  const fields = [\r\n    { key: 'codeEssai', label:'Code', _style: { width: '2%'} },\r\n    { key: 'nomTypeEssai', label:'Type d\\'essai', _style: { width: '20%'} },\r\n    { key: 'nomInstitution', label:'Institution', _style: { width: '20%'} },\r\n    // { key: 'departement', label:'Département', _style: { width: '20%'} },\r\n    // { key: 'adresse', label:'Adresse', _style: { width: '20%'} },\r\n    { key: 'nomFichier', label:'Fichier', _style: { width: '20%'} },\r\n    { key: 'dateRealisationEssai', label:'Date de réalisation', _style: { width: '10%'} },\r\n    {\r\n      key: 'show_details',\r\n      label: 'Actions',\r\n      _style: { width: '1%' },\r\n      sorter: false,\r\n      filter: false\r\n    }\r\n  ]\r\n\r\n  const [errorMessage, setErrorMessage] = useState('Echec du processus. Veuillez essayer ultérieurement !');\r\n  const [loadingState, setLoadingState] = useState(false);\r\n\r\n\r\n  const onDelete = (id) => {\r\n    if (window.confirm(\"Confirmer la suppression\")) {\r\n      const requestOptions = {\r\n        method: 'DELETE',\r\n        headers: { 'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${UserService.getToken()}`,\r\n        \"Access-Control-Allow-Credentials\" : true  },\r\n      };\r\n      fetch(`${process.env.REACT_APP_API_URL}/api/essais/`+id, requestOptions)\r\n        .then(response => console.log(response))\r\n        .then(() => setShow(true))\r\n        .then(() => setLoadingState(false))\r\n        .catch((error) => {\r\n          console.log(error);\r\n          setShowError(true)\r\n          setLoadingState(false);\r\n        })\r\n      const newList = data.filter((item) => item.idEssai !== id);\r\n      setData(newList);\r\n    } \r\n\r\n    setTimeout(() => {\r\n      setShow(false)\r\n      setShowError(false);\r\n    }, 3000)\r\n  }\r\n\r\n  \r\n  const [data, setData] = useState([])\r\n  useEffect(() => {\r\n    setLoadingStateHead(true);\r\n\r\n    fetch(`${process.env.REACT_APP_API_URL}/api/essais/fetch_with_pagination?pageSize=5&pageNumber=0`)\r\n      .then((response) => response.json())\r\n      .then((json) => setData(json.essaiDetailsDto))\r\n      .then(() => setLoadingStateHead(false))\r\n      .catch((error) => {\r\n        console.log(error);\r\n        setLoadingStateHead(false);\r\n      }); \r\n\r\n      fetch(`${process.env.REACT_APP_API_URL}/api/essais/count`)\r\n      .then((response) => response.json())\r\n      .then((json) => setTotalEssais(json))\r\n      .catch((error) => {\r\n        console.log(error);\r\n      }); \r\n\r\n\r\n      fetch(`${process.env.REACT_APP_API_URL}/api/utilisateurs/search?username=${UserService.getUsername()}`)\r\n      .then((response) => response.json())\r\n      .then((res)=> \r\n      setConnectedUser(res)\r\n      )\r\n    \r\n  }, [globalData]);\r\n\r\n  const [connectedUser, setConnectedUser] = useState({});\r\n  // useEffect(() => {\r\n  //   setLoadingStateHead(true);\r\n\r\n  //   fetch(`${process.env.REACT_APP_API_URL}/api/essais/`)\r\n  //     .then((response) => response.json())\r\n  //     .then((json) => setData(json))\r\n  //     .then(() => setLoadingStateHead(false))\r\n  //     .catch((error) => {\r\n  //       console.log(error);\r\n  //       setLoadingStateHead(false);\r\n  //     }); \r\n    \r\n  // }, []);\r\n  \r\n  const fetch_with_pagination = (pageSize, pageNumber) => {\r\n    console.log('fetch pagiination')\r\n    fetch(`${process.env.REACT_APP_API_URL}/api/essais/fetch_with_pagination?pageSize=${pageSize}&pageNumber=${pageNumber > 0 ? pageNumber : 0}`)\r\n    .then((response) => response.json())\r\n    .then((json) => setData(json.essaiDetailsDto))\r\n    .then(() => setLoadingStateHead(false))\r\n    .catch((error) => {\r\n      console.log(error);\r\n      setLoadingStateHead(false);\r\n    }); \r\n  }\r\n\r\n  const [loadingStateHead, setLoadingStateHead] = useState(false);\r\n\r\n\r\n \r\n    //  const getInstitutionOfActualUser = () =>{\r\n    //   //   var idIns;\r\n    //     fetch(`${process.env.REACT_APP_API_URL}/api/utilisateurs/search?username=${UserService.getUsername()}`)\r\n    //   .then((response) => response.json())\r\n    //   //   return idIns;   // The function returns the product of p1 and p2\r\n\r\n    //   }\r\n  \r\nconst [pageSize, setPageSize] = useState(5)\r\nconst [currentPage, setActivePage] = useState(0);\r\nconst [totalEssais, setTotalEssais] = useState(0);\r\n\r\nif (connectedUser.institution === undefined) {\r\n  return <>Chargement ...</>;\r\n}\r\n  return (\r\n    <div>\r\n          <CLink to=\"/tests/create\" >   \r\n            <CButton variant=\"outline\" color=\"success\">Ajouter</CButton>\r\n            <ClipLoader loading={loadingStateHead} size={25} />\r\n         </CLink>\r\n    \r\n\r\n         <CRow style={{float:'right'}}>\r\n      <CCol > Essais par page\r\n          <CSelect name=' Essais par page' onChange={(e)=>{\r\n              setPageSize(parseInt(e.target.value) );\r\n                fetch_with_pagination(e.target.value, 0);\r\n             \r\n            }}\r\n            className={`form-control shadow-none `}>\r\n                     <option value={5}>5</option>\r\n                      <option value={10}>10</option>\r\n                      <option value={20}>20</option>\r\n                      <option value={50}>50</option>\r\n            </CSelect>\r\n        </CCol>\r\n        </CRow>\r\n\r\n          <CDataTable outlined\r\n      items={data ? data : null}\r\n      fields={fields}\r\n      // dark\r\n      responsive\r\n      // columnFilter\r\n      tableFilter\r\n      // footer\r\n      // itemsPerPageSelect={{\r\n      //   label:'Essais par page',\r\n      //   // values:[5, 10, 20, 50],\r\n      //   // external:true\r\n      // }}\r\n      itemsPerPage ={pageSize}\r\n    \r\n      // pagination-change={(i) =>console.log(i)}\r\n      hover\r\n      sorter\r\n      onTableFilterChange={(keyWord) => console.log('JERE FILTR A'.keyWord)}\r\n      // pagination={{\r\n      //   pages:15\r\n      // }}\r\n      // onPageChange={(pageNumber) => fetch_with_pagination(5, pageNumber)\r\n      //   // console.log('Page ', page\r\n      //   }\r\n\r\n      scopedSlots = {{\r\n        'show_details':\r\n          (item, index)=>{\r\n            return (\r\n              <td className=\"py-2\">\r\n                <CButton\r\n                  color=\"primary\"\r\n                  variant=\"outline\"\r\n                  shape=\"square\"\r\n                  size=\"sm\"\r\n                  onClick={()=>{toggleDetails(index,item.id)}}\r\n                >\r\n                  {details.includes(index) ? 'Cacher' : 'Voir'}\r\n                </CButton>                          \r\n              </td>\r\n              )\r\n          },\r\n       \r\n        'details':\r\n            (item, index)=>{\r\n              return (\r\n              <CCollapse show={details.includes(index)}>\r\n                <Test essai = {item} />\r\n                {connectedUser ?\r\n                <>\r\n                  {\r\n                  connectedUser.institution.id === item.idInstitution ?\r\n                  <CCardBody>\r\n                    <CLink to={`/tests/edit/${item.idEssai}`}> \r\n                      <CButton size=\"sm\" color=\"info\">\r\n                        Modifier\r\n                      </CButton>\r\n                    </CLink>\r\n                      <CButton size=\"sm\" color=\"danger\" className=\"ml-1\" onClick= {() =>{onDelete(item.idEssai)}}>\r\n                        Supprimer\r\n                      </CButton>\r\n                  </CCardBody>\r\n                  :'' }\r\n                </> : null}\r\n              </CCollapse>\r\n            )\r\n          }\r\n      }}\r\n    />\r\n    <CPagination\r\n      activePage={currentPage}\r\n      pages={Math.floor(totalEssais/pageSize)}\r\n      onActivePageChange={(pageNumber) =>{\r\n        setActivePage(pageNumber);\r\n        fetch_with_pagination(pageSize,pageNumber-1);\r\n      } }\r\n    ></CPagination>\r\n\r\n         {/* SHOW SUCCES */}\r\n         <CCol sm=\"12\" lg=\"6\">\r\n    <CToaster\r\n      position={'top-right'}\r\n      > \r\n          <CToast\r\n            show={show}\r\n            autohide={true && 4000}\r\n            fade={true}\r\n          >\r\n            <CToastHeader closeButton={true}>\r\n            <CBadge className=\"mr-1\" color=\"success\">SUCCÈS</CBadge>              \r\n            </CToastHeader>\r\n            <CToastBody  color=\"success\">\r\n              Opération réussie !\r\n            </CToastBody>\r\n          </CToast>\r\n      </CToaster>\r\n    </CCol>\r\n\r\n    {/* SHOW ERROR */}\r\n    <CCol sm=\"12\" lg=\"6\">\r\n          <CToaster\r\n            position={'top-right'}\r\n          > \r\n                <CToast\r\n                  show={showError}\r\n                  autohide={true && 4000}\r\n                  fade={true}\r\n                >\r\n                  <CToastHeader closeButton={true}>\r\n                  <CBadge className=\"mr-1\" color=\"danger\">ECHEC</CBadge>              \r\n                  </CToastHeader>\r\n                  <CToastBody  color=\"success\">\r\n                    {errorMessage}\r\n                  </CToastBody>\r\n                </CToast>\r\n          </CToaster>\r\n        </CCol>\r\n    </div>\r\n    \r\n  )\r\n    }\r\n  export default Essais"],"sourceRoot":""}