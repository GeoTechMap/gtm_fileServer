(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[15],{679:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i(121);var n=i(176);function c(e){return function(e){if(Array.isArray(e))return Object(s.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(n.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},880:function(e,t,i){"use strict";i.r(t);var s=i(679),n=i(174),c=i(1),a=i(68),o=i(41),r=i(57),l=i(177),j=i(10),u=function(e){var t=Object(c.useContext)(l.a),i=Object(n.a)(t,2),s=i[0],u=i[1];return Object(j.jsx)(a.M,{children:Object(j.jsx)(a.l,{lg:6,children:Object(j.jsxs)(a.g,{children:[Object(j.jsxs)(a.k,{className:"text-muted",children:["Identifiant de l'essai : ",e.essai.codeEssai]}),Object(j.jsx)(a.h,{children:Object(j.jsxs)("ul",{children:[Object(j.jsxs)("li",{children:["Type d'essai :",e.essai.idTypeEssai?e.essai.nomTypeEssai:""]}),Object(j.jsx)("li",{children:Object(j.jsxs)("details",{children:[Object(j.jsxs)("summary",{children:["Institution : ",e.essai.nomInstitution," (",e.essai.sigleInstitution,")"]}),Object(j.jsxs)("ul",{children:[Object(j.jsxs)("li",{children:["Email : ",e.essai.emailInstitution]}),Object(j.jsxs)("li",{children:["T\xe9l\xe9phone : ",e.essai.telephone1Institution]}),Object(j.jsxs)("li",{children:["Adresse : ",e.essai.adresseInstitution]}),Object(j.jsxs)("li",{children:["\xc0 propos : ",e.essai.descriptionInstitution]})]})]})}),Object(j.jsxs)("li",{children:["Latitute : ",e.essai.latitudePosition]}),Object(j.jsxs)("li",{children:["Longitude : ",e.essai.longitudePosition]}),Object(j.jsxs)("li",{children:["Altitude : ",e.essai.altitudePosition]}),Object(j.jsxs)("li",{children:["D\xe9partement : ",e.essai.departementPosition]}),Object(j.jsxs)("li",{children:["Date de r\xe9alisation: ",e.essai.dateRealisationEssai]}),Object(j.jsxs)("li",{children:["Cr\xe9\xe9 le : ",e.essai.createdDateEssai]}),Object(j.jsxs)("li",{children:["Derni\xe8re modification : ",e.essai.lastModifiedDateEssai]}),Object(j.jsxs)("li",{children:["Modifi\xe9 par: ",e.essai.lastModifiedByEssai]}),Object(j.jsx)("li",{onClick:function(){return t=e.essai,void u(Object(o.a)(Object(o.a)({},s),{},{selectedEssai:t}));var t},children:Object(j.jsx)(r.b,{to:"/pdf/".concat(e.essai.idFichier),children:"Voir r\xe9sultat"})})]})})]})})})},h=i(680),d=i.n(h),b=i(45);t.default=function(){var e=Object(c.useContext)(l.a),t=Object(n.a)(e,2),i=t[0],o=(t[1],Object(c.useState)([])),r=Object(n.a)(o,2),h=r[0],O=r[1],f=Object(c.useState)(!1),p=Object(n.a)(f,2),x=p[0],m=p[1],g=Object(c.useState)(!1),w=Object(n.a)(g,2),y=w[0],v=w[1],E=Object(c.useState)("Echec du processus. Veuillez essayer ult\xe9rieurement !"),C=Object(n.a)(E,2),S=C[0],I=(C[1],Object(c.useState)(!1)),k=Object(n.a)(I,2),T=(k[0],k[1]),A=Object(c.useState)([]),_=Object(n.a)(A,2),D=_[0],N=_[1];Object(c.useEffect)((function(){V(!0),fetch("".concat("http://www.geotechmap.ueh.edu.ht","/api/essais/fetch_with_pagination?pageSize=5&pageNumber=0")).then((function(e){return e.json()})).then((function(e){return N(e.essaiDetailsDto)})).then((function(){return V(!1)})).catch((function(e){console.log(e),V(!1)})),fetch("".concat("http://www.geotechmap.ueh.edu.ht","/api/essais/count")).then((function(e){return e.json()})).then((function(e){return ee(e)})).catch((function(e){console.log(e)})),fetch("".concat("http://www.geotechmap.ueh.edu.ht","/api/utilisateurs/search?username=").concat(b.a.getUsername())).then((function(e){return e.json()})).then((function(e){return M(e)}))}),[i]);var z=Object(c.useState)({}),F=Object(n.a)(z,2),P=F[0],M=F[1],L=function(e,t){console.log("fetch pagiination"),fetch("".concat("http://www.geotechmap.ueh.edu.ht","/api/essais/fetch_with_pagination?pageSize=").concat(e,"&pageNumber=").concat(t>0?t:0)).then((function(e){return e.json()})).then((function(e){return N(e.essaiDetailsDto)})).then((function(){return V(!1)})).catch((function(e){console.log(e),V(!1)}))},B=Object(c.useState)(!1),R=Object(n.a)(B,2),J=R[0],V=R[1],K=Object(c.useState)(5),U=Object(n.a)(K,2),X=U[0],Y=U[1],Z=Object(c.useState)(0),q=Object(n.a)(Z,2),H=q[0],W=q[1],G=Object(c.useState)(0),Q=Object(n.a)(G,2),$=Q[0],ee=Q[1];return void 0===P.institution?Object(j.jsx)(j.Fragment,{children:"Chargement ..."}):Object(j.jsxs)("div",{children:[Object(j.jsxs)(a.K,{to:"/tests/create",children:[Object(j.jsx)(a.f,{variant:"outline",color:"success",children:"Ajouter"}),Object(j.jsx)(d.a,{loading:J,size:25})]}),Object(j.jsx)(a.M,{style:{float:"right"},children:Object(j.jsxs)(a.l,{children:[" Essais par page",Object(j.jsxs)(a.N,{name:" Essais par page",onChange:function(e){Y(parseInt(e.target.value)),L(e.target.value,0)},className:"form-control shadow-none ",children:[Object(j.jsx)("option",{value:5,children:"5"}),Object(j.jsx)("option",{value:10,children:"10"}),Object(j.jsx)("option",{value:20,children:"20"}),Object(j.jsx)("option",{value:50,children:"50"})]})]})}),Object(j.jsx)(a.p,{outlined:!0,items:D||null,fields:[{key:"codeEssai",label:"Code",_style:{width:"2%"}},{key:"nomTypeEssai",label:"Type d'essai",_style:{width:"20%"}},{key:"nomInstitution",label:"Institution",_style:{width:"20%"}},{key:"nomFichier",label:"Fichier",_style:{width:"20%"}},{key:"dateRealisationEssai",label:"Date de r\xe9alisation",_style:{width:"10%"}},{key:"show_details",label:"Actions",_style:{width:"1%"},sorter:!1,filter:!1}],responsive:!0,tableFilter:!0,itemsPerPage:X,hover:!0,sorter:!0,onTableFilterChange:function(e){return console.log("JERE FILTR A".keyWord)},scopedSlots:{show_details:function(e,t){return Object(j.jsx)("td",{className:"py-2",children:Object(j.jsx)(a.f,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:function(){!function(e,t){var i=h.indexOf(e),n=h.slice();-1!==i?n.splice(i,1):n=[].concat(Object(s.a)(h),[e]),O(n)}(t,e.id)},children:h.includes(t)?"Cacher":"Voir"})})},details:function(e,t){return Object(j.jsxs)(a.m,{show:h.includes(t),children:[Object(j.jsx)(u,{essai:e}),P?Object(j.jsx)(j.Fragment,{children:P.institution.id===e.idInstitution?Object(j.jsxs)(a.h,{children:[Object(j.jsx)(a.K,{to:"/tests/edit/".concat(e.idEssai),children:Object(j.jsx)(a.f,{size:"sm",color:"info",children:"Modifier"})}),Object(j.jsx)(a.f,{size:"sm",color:"danger",className:"ml-1",onClick:function(){!function(e){if(window.confirm("Confirmer la suppression")){var t={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b.a.getToken()),"Access-Control-Allow-Credentials":!0}};fetch("".concat("http://www.geotechmap.ueh.edu.ht","/api/essais/")+e,t).then((function(e){return console.log(e)})).then((function(){return m(!0)})).then((function(){return T(!1)})).catch((function(e){console.log(e),v(!0),T(!1)}));var i=D.filter((function(t){return t.idEssai!==e}));N(i)}setTimeout((function(){m(!1),v(!1)}),3e3)}(e.idEssai)},children:"Supprimer"})]}):""}):null]})}}}),Object(j.jsx)(a.L,{activePage:H,pages:Math.floor($/X),onActivePageChange:function(e){W(e),L(X,e-1)}}),Object(j.jsx)(a.l,{sm:"12",lg:"6",children:Object(j.jsx)(a.ab,{position:"top-right",children:Object(j.jsxs)(a.X,{show:x,autohide:4e3,fade:!0,children:[Object(j.jsx)(a.Z,{closeButton:!0,children:Object(j.jsx)(a.b,{className:"mr-1",color:"success",children:"SUCC\xc8S"})}),Object(j.jsx)(a.Y,{color:"success",children:"Op\xe9ration r\xe9ussie !"})]})})}),Object(j.jsx)(a.l,{sm:"12",lg:"6",children:Object(j.jsx)(a.ab,{position:"top-right",children:Object(j.jsxs)(a.X,{show:y,autohide:4e3,fade:!0,children:[Object(j.jsx)(a.Z,{closeButton:!0,children:Object(j.jsx)(a.b,{className:"mr-1",color:"danger",children:"ECHEC"})}),Object(j.jsx)(a.Y,{color:"success",children:S})]})})})]})}}}]);
//# sourceMappingURL=15.3c79b97b.chunk.js.map