(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[17],{685:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(40),n=a(173),s=a(174),c=(a(1),a(67)),r=a(684),l=a(10),o=function(e){var t=e.label,a=e.type,o=e.options,u=Object(s.a)(e,["label","type","options"]),m=Object(r.d)(u),j=Object(n.a)(m,2),d=j[0],b=j[1];return Object(l.jsxs)("div",{className:"mb-2",children:[Object(l.jsx)("label",{htmlFor:d.name,children:t}),"textarea"===a?Object(l.jsx)("textarea",Object(i.a)(Object(i.a)({className:"form-control shadow-none ".concat(b.touched&&b.error&&"is-invalid"),placeholder:"Veuillez entrer la description...",rows:"6"},d),u)):"select"===a?Object(l.jsxs)(c.N,Object(i.a)(Object(i.a)(Object(i.a)({name:t,className:"form-control shadow-none ".concat(b.touched&&b.error&&"is-invalid")},d),u),{},{children:[Object(l.jsx)("option",{value:0,children:"Choisir"}),o.map((function(e,t){return Object(l.jsx)("option",{value:e.id,children:e.nom},t)}))]})):"selectString"===a?Object(l.jsxs)(c.N,Object(i.a)(Object(i.a)(Object(i.a)({name:t,className:"form-control shadow-none ".concat(b.touched&&b.error&&"is-invalid")},d),u),{},{children:[Object(l.jsx)("option",{value:0,children:"Choisir"}),o.map((function(e,t){return Object(l.jsx)("option",{value:e,children:e},t)}))]})):Object(l.jsx)("input",Object(i.a)(Object(i.a)({className:"form-control shadow-none ".concat(b.touched&&b.error&&"is-invalid")},d),u)),Object(l.jsx)(r.a,{component:"div",name:d.name,style:{position:"absolute",color:"red",fontSize:".6rem"}})]})}},894:function(e,t,a){"use strict";a.r(t);var i=a(173),n=a(1),s=a.n(n),c=a(684),r=a(685),l=a(703),o=a(67),u=a(44),m=a(680),j=a.n(m),d=a(10);t.default=function(e){var t=e.match,a=Object(n.useState)(!1),m=Object(i.a)(a,2),b=m[0],h=m[1],p=Object(n.useState)(!1),O=Object(i.a)(p,2),x=O[0],f=O[1];Object(n.useEffect)((function(){fetch("".concat("http://ec2-3-137-195-79.us-east-2.compute.amazonaws.com:8080/webmap","/api/keycloakusers/")).then((function(e){return e.json()})).then((function(e){return w(e),e})),fetch("".concat("http://ec2-3-137-195-79.us-east-2.compute.amazonaws.com:8080/webmap","/api/institutions/")).then((function(e){return e.json()})).then((function(e){return S(e),e})),t.params.id&&fetch("".concat("http://ec2-3-137-195-79.us-east-2.compute.amazonaws.com:8080/webmap","/api/utilisateurs/")+t.params.id).then((function(e){return e.json()})).then((function(e){return D({nom:e.utilisateurDto.nom,prenom:e.utilisateurDto.prenom,username:e.utilisateurDto.username,email:e.utilisateurDto.email,adresse:e.utilisateurDto.adresse,telephone:e.utilisateurDto.telephone,institution:e.utilisateurDto.institution.id})}))}),[t.params.id]);var g=Object(n.useState)([]),y=Object(i.a)(g,2),v=y[0],w=y[1],N=Object(n.useState)([]),z=Object(i.a)(N,2),C=z[0],S=z[1],k=Object(n.useState)(null),E=Object(i.a)(k,2),V=E[0],D=E[1],M=s.a.useState({isActive:!1,status:"",message:""}),T=Object(i.a)(M,2),q=T[0],A=(T[1],Object(n.useState)()),B=Object(i.a)(A,2),F=(B[0],B[1],l.b({nom:l.c().max(100,"Maximum 100 caract\xe8res").min(3,"3 caract\xe8res au minimum").required("Champs obligatire"),prenom:l.c().max(45,"Maximum 45 caract\xe8res").min(3,"3 caract\xe8res au minimum"),adresse:l.c().max(45,"Maximum 45 caract\xe8res").min(3,"3 caract\xe8res au minimum").required("Champs obligatire"),telephone:l.c().max(15,"Maximum 15 caract\xe8res").min(3,"3 caract\xe8res au minimum").required("Champs obligatire"),email:l.c().email("Email invalide").required("Champs obligatire"),username:l.c().max(45,"Maximum 45 caract\xe8res").min(1,"Faire un choix").required("Champs obligatoire"),institution:l.a().min(1,"Faire un choix").required("Champs obligatoire")})),I=Object(n.useState)(!1),J=Object(i.a)(I,2),P=J[0],R=J[1];return Object(d.jsxs)("div",{children:[Object(d.jsx)(c.c,{initialValues:V||{nom:"",prenom:"",username:"",email:"",adresse:"",telephone:"",institution:""},enableReinitialize:!0,validationSchema:F,onSubmit:function(e){R(!0);var a={method:t.params.id?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u.a.getToken())},body:JSON.stringify({id:t.params.id?V.id:null,nom:e.nom,idKeycloak:"plplp",prenom:e.prenom,adresse:e.adresse,telephone:e.telephone,email:e.email,username:e.username,institution:{id:e.institution}})};t.params.id?fetch("".concat("http://ec2-3-137-195-79.us-east-2.compute.amazonaws.com:8080/webmap","/api/utilisateurs/")+t.params.id,a).then((function(e){return e.json()})).then((function(){return h(!0)})).then((function(){return R(!1)})).catch((function(e){console.log(e),f(!0),R(!1)})):fetch("".concat("http://ec2-3-137-195-79.us-east-2.compute.amazonaws.com:8080/webmap","/api/utilisateurs/"),a).then((function(e){return e.json()})).then((function(){return h(!0)})).then((function(){return R(!1)})).then((function(){return setTimeout((function(){window.location.reload()}),3e3)})).catch((function(e){console.log(e),f(!0),R(!1)})),setTimeout((function(){h(!1),f(!1)}),3e3)},children:function(e){return Object(d.jsx)("div",{children:Object(d.jsxs)(c.b,{children:[q.isActive?Object(d.jsx)(o.a,{color:"info",closeButton:!0,children:q.message}):"",Object(d.jsxs)(o.M,{children:[Object(d.jsx)(o.l,{xs:"12",sm:"6",children:Object(d.jsxs)(o.g,{children:[Object(d.jsxs)(o.k,{children:["Informations sur l'utilisateur   ",t.params.id]}),Object(d.jsxs)(o.h,{children:[Object(d.jsxs)(o.x,{children:[Object(d.jsx)(r.a,{label:"Nom*:",name:"nom",type:"text",placeholder:"Entrer le nom de l'utilisateur...",autoComplete:"nom"}),Object(d.jsx)(o.y,{className:"help-block",children:"Veuillez entrer le nom de l'utilisateur"})]}),Object(d.jsxs)(o.x,{children:[Object(d.jsx)(r.a,{label:"Pr\xe9nom:",name:"prenom",type:"text",placeholder:"Entrer le pr\xe9nom de l'utilisateur...",autoComplete:"sigle"}),Object(d.jsx)(o.y,{className:"help-block",children:"Veuillez entrer le pr\xe9nom de l'utilisateur"})]}),Object(d.jsxs)(o.x,{children:[Object(d.jsx)(r.a,{label:"Adresse*:",name:"adresse",type:"text",placeholder:"Entrer l'adresse de l'institution..",autoComplete:"adresse"}),Object(d.jsx)(o.y,{className:"help-block",children:"Veuillez entrer l'adresse de l'utilisateur"})]}),Object(d.jsxs)(o.x,{children:[Object(d.jsx)(r.a,{label:"T\xe9l\xe9phone:",name:"telephone",type:"text",placeholder:"Entrer un num\xe9ro de t\xe9l\xe9phone...",autoComplete:"telephone1"}),Object(d.jsx)(o.y,{className:"help-block",children:"Veuillez entrer le num\xe9ro de t\xe9l\xe9phone de l'utilisateur"})]})]})]})}),Object(d.jsx)(o.l,{xs:"12",sm:"6",children:Object(d.jsxs)(o.g,{children:[Object(d.jsxs)(o.k,{children:["Informations sur l'utilisateur   ",t.params.id]}),Object(d.jsxs)(o.h,{children:[Object(d.jsxs)(o.x,{children:[Object(d.jsx)(r.a,{label:"Email*:",name:"email",type:"text",placeholder:"Enter l'email de l'utilisateur...",autoComplete:"email"}),Object(d.jsx)(o.y,{className:"help-block",children:"Veuillez entrer l'email de l'utilisateur"})]}),Object(d.jsxs)(o.x,{children:[Object(d.jsx)(r.a,{label:"Nom d'utilisateur*:",name:"username",type:"selectString",options:v}),Object(d.jsx)(o.y,{className:"help-block",children:"Veuillez choisir le nom d'utilisateur"})]}),Object(d.jsxs)(o.x,{children:[Object(d.jsx)(r.a,{label:"Institution*:",name:"institution",type:"select",options:C,placeholder:"Entrer l'institution"}),Object(d.jsx)(o.y,{className:"help-block",children:"Veuillez entrer l'institution"})]})]}),Object(d.jsxs)(o.i,{children:[Object(d.jsxs)("button",{className:"btn btn-dark mt-3",type:"submit",disabled:P,children:[t.params.id?"Modifier":"Enregistrer",Object(d.jsx)(j.a,{loading:P,size:15})]}),Object(d.jsx)("button",{className:"btn btn-danger mt-3 ml-3",type:"reset",children:"R\xe9initialiser"})]})]})})]})]})})}}),Object(d.jsx)(o.l,{sm:"12",lg:"6",children:Object(d.jsx)(o.ab,{position:"top-right",children:Object(d.jsxs)(o.X,{show:b,autohide:4e3,fade:!0,children:[Object(d.jsx)(o.Z,{closeButton:!0,children:Object(d.jsx)(o.b,{className:"mr-1",color:"success",children:"SUCC\xc8S"})}),Object(d.jsx)(o.Y,{color:"success",children:"Op\xe9ration r\xe9ussie !"})]})})}),Object(d.jsx)(o.l,{sm:"12",lg:"6",children:Object(d.jsx)(o.ab,{position:"top-right",children:Object(d.jsxs)(o.X,{show:x,autohide:4e3,fade:!0,children:[Object(d.jsx)(o.Z,{closeButton:!0,children:Object(d.jsx)(o.b,{className:"mr-1",color:"danger",children:"ECHEC"})}),Object(d.jsx)(o.Y,{color:"success",children:"Echec de l'op\xe9ration. Veuillez essayer plus tard !"})]})})})]})}}}]);
//# sourceMappingURL=17.7c8fb6c5.chunk.js.map