(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[18],{690:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(40),a=i(173),s=i(174),r=(i(1),i(67)),c=i(689),l=i(10),o=function(e){var t=e.label,i=e.type,o=e.options,u=Object(s.a)(e,["label","type","options"]),m=Object(c.d)(u),j=Object(a.a)(m,2),d=j[0],h=j[1];return Object(l.jsxs)("div",{className:"mb-2",children:[Object(l.jsx)("label",{htmlFor:d.name,children:t}),"textarea"===i?Object(l.jsx)("textarea",Object(n.a)(Object(n.a)({className:"form-control shadow-none ".concat(h.touched&&h.error&&"is-invalid"),placeholder:"Veuillez entrer la description...",rows:"6"},d),u)):"select"===i?Object(l.jsxs)(r.N,Object(n.a)(Object(n.a)(Object(n.a)({name:t,className:"form-control shadow-none ".concat(h.touched&&h.error&&"is-invalid")},d),u),{},{children:[Object(l.jsx)("option",{value:0,children:"Choisir"}),o.map((function(e,t){return Object(l.jsx)("option",{value:e.id,children:e.nom},t)}))]})):"selectString"===i?Object(l.jsxs)(r.N,Object(n.a)(Object(n.a)(Object(n.a)({name:t,className:"form-control shadow-none ".concat(h.touched&&h.error&&"is-invalid")},d),u),{},{children:[Object(l.jsx)("option",{value:0,children:"Choisir"}),o.map((function(e,t){return Object(l.jsx)("option",{value:e,children:e},t)}))]})):Object(l.jsx)("input",Object(n.a)(Object(n.a)({className:"form-control shadow-none ".concat(h.touched&&h.error&&"is-invalid")},d),u)),Object(l.jsx)(c.a,{component:"div",name:d.name,style:{position:"absolute",color:"red",fontSize:".6rem"}})]})}},902:function(e,t,i){"use strict";i.r(t);var n=i(173),a=i(1),s=i.n(a),r=i(689),c=i(690),l=i(711),o=i(67),u=i(44),m=i(682),j=i.n(m),d=i(10);t.default=function(e){var t=e.match,i=Object(a.useState)(!1),m=Object(n.a)(i,2),h=m[0],b=m[1],p=Object(a.useState)(!1),O=Object(n.a)(p,2),x=O[0],f=O[1];Object(a.useEffect)((function(){fetch("http://localhost:8080/api/keycloakusers/").then((function(e){return e.json()})).then((function(e){return N(e),e})),fetch("http://localhost:8080/api/institutions/").then((function(e){return e.json()})).then((function(e){return z(e),e})),t.params.id&&fetch("http://localhost:8080/api/utilisateurs/"+t.params.id).then((function(e){return e.json()})).then((function(e){return D({nom:e.utilisateurDto.nom,prenom:e.utilisateurDto.prenom,username:e.utilisateurDto.username,email:e.utilisateurDto.email,adresse:e.utilisateurDto.adresse,telephone:e.utilisateurDto.telephone,institution:e.utilisateurDto.institution.id})}))}),[t.params.id]);var g=Object(a.useState)([]),y=Object(n.a)(g,2),v=y[0],N=y[1],C=Object(a.useState)([]),S=Object(n.a)(C,2),k=S[0],z=S[1],E=Object(a.useState)(null),w=Object(n.a)(E,2),V=w[0],D=w[1],M=s.a.useState({isActive:!1,status:"",message:""}),T=Object(n.a)(M,2),q=T[0],A=(T[1],Object(a.useState)()),B=Object(n.a)(A,2),F=(B[0],B[1],l.b({nom:l.c().max(100,"Maximum 100 caract\xe8res").min(3,"3 caract\xe8res au minimum").required("Champs obligatire"),prenom:l.c().max(45,"Maximum 45 caract\xe8res").min(3,"3 caract\xe8res au minimum"),adresse:l.c().max(45,"Maximum 45 caract\xe8res").min(3,"3 caract\xe8res au minimum").required("Champs obligatire"),telephone:l.c().max(15,"Maximum 15 caract\xe8res").min(3,"3 caract\xe8res au minimum").required("Champs obligatire"),email:l.c().email("Email invalide").required("Champs obligatire"),username:l.c().max(45,"Maximum 45 caract\xe8res").min(1,"Faire un choix").required("Champs obligatoire"),institution:l.a().min(1,"Faire un choix").required("Champs obligatoire")})),I=Object(a.useState)(!1),J=Object(n.a)(I,2),P=J[0],R=J[1];return Object(d.jsxs)("div",{children:[Object(d.jsx)(r.c,{initialValues:V||{nom:"",prenom:"",username:"",email:"",adresse:"",telephone:"",institution:""},enableReinitialize:!0,validationSchema:F,onSubmit:function(e){R(!0);var i={method:t.params.id?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u.a.getToken())},body:JSON.stringify({id:t.params.id?V.id:null,nom:e.nom,idKeycloak:"plplp",prenom:e.prenom,adresse:e.adresse,telephone:e.telephone,email:e.email,username:e.username,institution:{id:e.institution}})};t.params.id?fetch("http://localhost:8080/api/utilisateurs/"+t.params.id,i).then((function(e){return e.json()})).then((function(){return b(!0)})).then((function(){return R(!1)})).catch((function(e){console.log(e),f(!0),R(!1)})):fetch("http://localhost:8080/api/utilisateurs/",i).then((function(e){return e.json()})).then((function(){return b(!0)})).then((function(){return R(!1)})).then((function(){return setTimeout((function(){window.location.reload()}),3e3)})).catch((function(e){console.log(e),f(!0),R(!1)})),setTimeout((function(){b(!1),f(!1)}),3e3)},children:function(e){return Object(d.jsx)("div",{children:Object(d.jsxs)(r.b,{children:[q.isActive?Object(d.jsx)(o.a,{color:"info",closeButton:!0,children:q.message}):"",Object(d.jsxs)(o.M,{children:[Object(d.jsx)(o.l,{xs:"12",sm:"6",children:Object(d.jsxs)(o.g,{children:[Object(d.jsxs)(o.k,{children:["Informations sur l'utilisateur   ",t.params.id]}),Object(d.jsxs)(o.h,{children:[Object(d.jsxs)(o.x,{children:[Object(d.jsx)(c.a,{label:"Nom*:",name:"nom",type:"text",placeholder:"Entrer le nom de l'utilisateur...",autoComplete:"nom"}),Object(d.jsx)(o.y,{className:"help-block",children:"Veuillez entrer le nom de l'utilisateur"})]}),Object(d.jsxs)(o.x,{children:[Object(d.jsx)(c.a,{label:"Pr\xe9nom:",name:"prenom",type:"text",placeholder:"Entrer le pr\xe9nom de l'utilisateur...",autoComplete:"sigle"}),Object(d.jsx)(o.y,{className:"help-block",children:"Veuillez entrer le pr\xe9nom de l'utilisateur"})]}),Object(d.jsxs)(o.x,{children:[Object(d.jsx)(c.a,{label:"Adresse*:",name:"adresse",type:"text",placeholder:"Entrer l'adresse de l'institution..",autoComplete:"adresse"}),Object(d.jsx)(o.y,{className:"help-block",children:"Veuillez entrer l'adresse de l'utilisateur"})]}),Object(d.jsxs)(o.x,{children:[Object(d.jsx)(c.a,{label:"T\xe9l\xe9phone:",name:"telephone",type:"text",placeholder:"Entrer un num\xe9ro de t\xe9l\xe9phone...",autoComplete:"telephone1"}),Object(d.jsx)(o.y,{className:"help-block",children:"Veuillez entrer le num\xe9ro de t\xe9l\xe9phone de l'utilisateur"})]})]})]})}),Object(d.jsx)(o.l,{xs:"12",sm:"6",children:Object(d.jsxs)(o.g,{children:[Object(d.jsxs)(o.k,{children:["Informations sur l'utilisateur   ",t.params.id]}),Object(d.jsxs)(o.h,{children:[Object(d.jsxs)(o.x,{children:[Object(d.jsx)(c.a,{label:"Email*:",name:"email",type:"text",placeholder:"Enter l'email de l'utilisateur...",autoComplete:"email"}),Object(d.jsx)(o.y,{className:"help-block",children:"Veuillez entrer l'email de l'utilisateur"})]}),Object(d.jsxs)(o.x,{children:[Object(d.jsx)(c.a,{label:"Nom d'utilisateur*:",name:"username",type:"selectString",options:v}),Object(d.jsx)(o.y,{className:"help-block",children:"Veuillez choisir le nom d'utilisateur"})]}),Object(d.jsxs)(o.x,{children:[Object(d.jsx)(c.a,{label:"Institution*:",name:"institution",type:"select",options:k,placeholder:"Entrer l'institution"}),Object(d.jsx)(o.y,{className:"help-block",children:"Veuillez entrer l'institution"})]})]}),Object(d.jsxs)(o.i,{children:[Object(d.jsxs)("button",{className:"btn btn-dark mt-3",type:"submit",disabled:P,children:[t.params.id?"Modifier":"Enregistrer",Object(d.jsx)(j.a,{loading:P,size:15})]}),Object(d.jsx)("button",{className:"btn btn-danger mt-3 ml-3",type:"reset",children:"R\xe9initialiser"})]})]})})]})]})})}}),Object(d.jsx)(o.l,{sm:"12",lg:"6",children:Object(d.jsx)(o.ab,{position:"top-right",children:Object(d.jsxs)(o.X,{show:h,autohide:4e3,fade:!0,children:[Object(d.jsx)(o.Z,{closeButton:!0,children:Object(d.jsx)(o.b,{className:"mr-1",color:"success",children:"SUCC\xc8S"})}),Object(d.jsx)(o.Y,{color:"success",children:"Op\xe9ration r\xe9ussie !"})]})})}),Object(d.jsx)(o.l,{sm:"12",lg:"6",children:Object(d.jsx)(o.ab,{position:"top-right",children:Object(d.jsxs)(o.X,{show:x,autohide:4e3,fade:!0,children:[Object(d.jsx)(o.Z,{closeButton:!0,children:Object(d.jsx)(o.b,{className:"mr-1",color:"danger",children:"ECHEC"})}),Object(d.jsx)(o.Y,{color:"success",children:"Echec de l'op\xe9ration. Veuillez essayer plus tard !"})]})})})]})}}}]);
//# sourceMappingURL=18.801baad8.chunk.js.map